{"ast":null,"code":"const {\n  types\n} = require('@algo-builder/web');\nexport default async function depositFunc(web, wallet_address, algo_amt) {\n  var raw = {\n    \"sender_wallet\": wallet_address,\n    \"algo_amt\": algo_amt\n  };\n  var requestOptions = {\n    method: 'POST',\n    body: JSON.stringify(raw),\n    redirect: 'follow',\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  };\n  txnParams = {\n    type: types.TransactionType.OptInASA,\n    sign: types.SignType.SecretKey,\n    fromAccountAddr: senderAcc,\n    payFlags: {\n      totalFee: 1000\n    }\n  };\n  const txnParameters = Array.isArray(txnParams) ? txnParams : [txnParams];\n\n  // web.executeTx(\n  //   txnParameters\n  // )\n  fetch(\"http://127.0.0.1:5000/blockchain/deposit\", requestOptions).then(response => response.text()).then(async result => {\n    await tryExecuteTx(web, txnParameters);\n  }).catch(error => console.log('error', error));\n}\nasync function tryExecuteTx(web, txnParams) {\n  try {\n    const txnParameters = Array.isArray(txnParams) ? txnParams : [txnParams];\n    console.log(txnParameters);\n    return await web.executeTx(txnParameters);\n  } catch (e) {\n    console.error('Transaction Failed', e);\n    throw e;\n  }\n}","map":{"version":3,"names":["types","require","depositFunc","web","wallet_address","algo_amt","raw","requestOptions","method","body","JSON","stringify","redirect","headers","txnParams","type","TransactionType","OptInASA","sign","SignType","SecretKey","fromAccountAddr","senderAcc","payFlags","totalFee","txnParameters","Array","isArray","fetch","then","response","text","result","tryExecuteTx","catch","error","console","log","executeTx","e"],"sources":["C:/Users/user/Desktop/Optimum-Staking-main/Optimum-Staking-main/frontend/src/api/deposit.js"],"sourcesContent":["\r\nconst { types } = require('@algo-builder/web');\r\n\r\nexport default async function depositFunc(web, wallet_address, algo_amt) {\r\n    var raw = {\r\n          \"sender_wallet\": wallet_address,\r\n          \"algo_amt\": algo_amt\r\n        }\r\n\r\n    var requestOptions = {\r\n      method: 'POST',\r\n      body: JSON.stringify(raw),\r\n      redirect: 'follow',\r\n      headers : {\r\n          'Content-Type' : 'application/json'\r\n      }\r\n    };\r\n    txnParams = {\r\n      type: types.TransactionType.OptInASA,\r\n      sign: types.SignType.SecretKey,\r\n      fromAccountAddr: senderAcc,\r\n      payFlags: { totalFee: 1000 }\r\n    }\r\n    const txnParameters = Array.isArray(txnParams)\r\n          ? txnParams\r\n          : [txnParams];\r\n \r\n    // web.executeTx(\r\n    //   txnParameters\r\n    // )\r\n    fetch(\"http://127.0.0.1:5000/blockchain/deposit\", requestOptions)\r\n    .then(response => response.text())\r\n    .then(async result => {\r\n      await tryExecuteTx(web, txnParameters)\r\n    })\r\n    .catch(error => console.log('error', error));\r\n  }  \r\n\r\nasync function tryExecuteTx(web, txnParams) {\r\n  try {\r\n      const txnParameters = Array.isArray(txnParams)\r\n          ? txnParams\r\n          : [txnParams];\r\n      console.log(txnParameters)\r\n      return await web.executeTx(txnParameters);\r\n  } catch (e) {\r\n      console.error('Transaction Failed', e);\r\n      throw e;\r\n  }\r\n}"],"mappings":"AACA,MAAM;EAAEA;AAAM,CAAC,GAAGC,OAAO,CAAC,mBAAmB,CAAC;AAE9C,eAAe,eAAeC,WAAW,CAACC,GAAG,EAAEC,cAAc,EAAEC,QAAQ,EAAE;EACrE,IAAIC,GAAG,GAAG;IACJ,eAAe,EAAEF,cAAc;IAC/B,UAAU,EAAEC;EACd,CAAC;EAEL,IAAIE,cAAc,GAAG;IACnBC,MAAM,EAAE,MAAM;IACdC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACL,GAAG,CAAC;IACzBM,QAAQ,EAAE,QAAQ;IAClBC,OAAO,EAAG;MACN,cAAc,EAAG;IACrB;EACF,CAAC;EACDC,SAAS,GAAG;IACVC,IAAI,EAAEf,KAAK,CAACgB,eAAe,CAACC,QAAQ;IACpCC,IAAI,EAAElB,KAAK,CAACmB,QAAQ,CAACC,SAAS;IAC9BC,eAAe,EAAEC,SAAS;IAC1BC,QAAQ,EAAE;MAAEC,QAAQ,EAAE;IAAK;EAC7B,CAAC;EACD,MAAMC,aAAa,GAAGC,KAAK,CAACC,OAAO,CAACb,SAAS,CAAC,GACtCA,SAAS,GACT,CAACA,SAAS,CAAC;;EAEnB;EACA;EACA;EACAc,KAAK,CAAC,0CAA0C,EAAErB,cAAc,CAAC,CAChEsB,IAAI,CAACC,QAAQ,IAAIA,QAAQ,CAACC,IAAI,EAAE,CAAC,CACjCF,IAAI,CAAC,MAAMG,MAAM,IAAI;IACpB,MAAMC,YAAY,CAAC9B,GAAG,EAAEsB,aAAa,CAAC;EACxC,CAAC,CAAC,CACDS,KAAK,CAACC,KAAK,IAAIC,OAAO,CAACC,GAAG,CAAC,OAAO,EAAEF,KAAK,CAAC,CAAC;AAC9C;AAEF,eAAeF,YAAY,CAAC9B,GAAG,EAAEW,SAAS,EAAE;EAC1C,IAAI;IACA,MAAMW,aAAa,GAAGC,KAAK,CAACC,OAAO,CAACb,SAAS,CAAC,GACxCA,SAAS,GACT,CAACA,SAAS,CAAC;IACjBsB,OAAO,CAACC,GAAG,CAACZ,aAAa,CAAC;IAC1B,OAAO,MAAMtB,GAAG,CAACmC,SAAS,CAACb,aAAa,CAAC;EAC7C,CAAC,CAAC,OAAOc,CAAC,EAAE;IACRH,OAAO,CAACD,KAAK,CAAC,oBAAoB,EAAEI,CAAC,CAAC;IACtC,MAAMA,CAAC;EACX;AACF"},"metadata":{},"sourceType":"module"}