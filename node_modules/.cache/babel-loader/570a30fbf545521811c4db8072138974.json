{"ast":null,"code":"const {\n  types\n} = require('@algo-builder/web');\nconst {\n  getApplicationAddress\n} = require('algosdk');\nconst {\n  OptAsaID,\n  OptAppID\n} = require('../utils/common.js');\nexport default async function depositFunc(web, wallet_address, algo_amt, network) {\n  var raw = {\n    \"sender_wallet\": wallet_address,\n    \"algo_amt\": algo_amt\n  };\n  var requestOptions = {\n    method: 'POST',\n    body: JSON.stringify(raw),\n    redirect: 'follow',\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  };\n  console.log(getApplicationAddress(OptAppID(network)));\n  let txnParams = {\n    type: types.TransactionType.TransferAlgo,\n    sign: types.SignType.SecretKey,\n    fromAccountAddr: wallet_address,\n    toAccountAddr: getApplicationAddress(OptAppID(network)),\n    amountMicroAlgos: algo_amt,\n    payFlags: {\n      totalFee: 1000\n    }\n  };\n  web.executeTx();\n  // let res = await tryExecuteTx(web, txnParams)\n  // console.log(res)\n  fetch(\"http://127.0.0.1:5000/blockchain/deposit\", requestOptions).then(response => response.text()).then(result => {\n    console.log(result);\n  }).catch(error => console.log('error', error));\n}\nasync function tryExecuteTx(web, txnParams) {\n  try {\n    const txnParameters = Array.isArray(txnParams) ? txnParams : [txnParams];\n    console.log(txnParameters);\n    return await web.executeTx(txnParameters);\n  } catch (e) {\n    console.error('Transaction Failed', e);\n    throw e;\n  }\n}","map":{"version":3,"names":["types","require","getApplicationAddress","OptAsaID","OptAppID","depositFunc","web","wallet_address","algo_amt","network","raw","requestOptions","method","body","JSON","stringify","redirect","headers","console","log","txnParams","type","TransactionType","TransferAlgo","sign","SignType","SecretKey","fromAccountAddr","toAccountAddr","amountMicroAlgos","payFlags","totalFee","executeTx","fetch","then","response","text","result","catch","error","tryExecuteTx","txnParameters","Array","isArray","e"],"sources":["C:/Users/user/Desktop/Optimum-Staking-main/Optimum-Staking-main/frontend/src/api/deposit.js"],"sourcesContent":["\r\nconst { types } = require('@algo-builder/web');\r\nconst { getApplicationAddress } = require('algosdk');\r\nconst {\r\n    OptAsaID,\r\n    OptAppID,\r\n} = require('../utils/common.js');\r\n\r\n\r\nexport default async function depositFunc(web, wallet_address, algo_amt, network) {\r\n    var raw = {\r\n          \"sender_wallet\": wallet_address,\r\n          \"algo_amt\": algo_amt\r\n        }\r\n\r\n    var requestOptions = {\r\n      method: 'POST',\r\n      body: JSON.stringify(raw),\r\n      redirect: 'follow',\r\n      headers : {\r\n          'Content-Type' : 'application/json'\r\n      }\r\n    };\r\n    console.log(getApplicationAddress(OptAppID(network)))\r\n    let txnParams = {\r\n            type: types.TransactionType.TransferAlgo,\r\n            sign: types.SignType.SecretKey,\r\n            fromAccountAddr: wallet_address,\r\n            toAccountAddr: getApplicationAddress(OptAppID(network)),\r\n            amountMicroAlgos: algo_amt,\r\n            payFlags: { totalFee: 1000 }\r\n        }\r\n    web.executeTx()\r\n    // let res = await tryExecuteTx(web, txnParams)\r\n    // console.log(res)\r\n    fetch(\"http://127.0.0.1:5000/blockchain/deposit\", requestOptions)\r\n    .then(response => response.text())\r\n    .then(result => {\r\n      console.log(result)\r\n    })\r\n    .catch(error => console.log('error', error));\r\n  }  \r\n\r\nasync function tryExecuteTx(web, txnParams) {\r\n  try {\r\n      const txnParameters = Array.isArray(txnParams)\r\n          ? txnParams\r\n          : [txnParams];\r\n      console.log(txnParameters)\r\n      return await web.executeTx(txnParameters);\r\n  } catch (e) {\r\n      console.error('Transaction Failed', e);\r\n      throw e;\r\n  }\r\n}"],"mappings":"AACA,MAAM;EAAEA;AAAM,CAAC,GAAGC,OAAO,CAAC,mBAAmB,CAAC;AAC9C,MAAM;EAAEC;AAAsB,CAAC,GAAGD,OAAO,CAAC,SAAS,CAAC;AACpD,MAAM;EACFE,QAAQ;EACRC;AACJ,CAAC,GAAGH,OAAO,CAAC,oBAAoB,CAAC;AAGjC,eAAe,eAAeI,WAAW,CAACC,GAAG,EAAEC,cAAc,EAAEC,QAAQ,EAAEC,OAAO,EAAE;EAC9E,IAAIC,GAAG,GAAG;IACJ,eAAe,EAAEH,cAAc;IAC/B,UAAU,EAAEC;EACd,CAAC;EAEL,IAAIG,cAAc,GAAG;IACnBC,MAAM,EAAE,MAAM;IACdC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACL,GAAG,CAAC;IACzBM,QAAQ,EAAE,QAAQ;IAClBC,OAAO,EAAG;MACN,cAAc,EAAG;IACrB;EACF,CAAC;EACDC,OAAO,CAACC,GAAG,CAACjB,qBAAqB,CAACE,QAAQ,CAACK,OAAO,CAAC,CAAC,CAAC;EACrD,IAAIW,SAAS,GAAG;IACRC,IAAI,EAAErB,KAAK,CAACsB,eAAe,CAACC,YAAY;IACxCC,IAAI,EAAExB,KAAK,CAACyB,QAAQ,CAACC,SAAS;IAC9BC,eAAe,EAAEpB,cAAc;IAC/BqB,aAAa,EAAE1B,qBAAqB,CAACE,QAAQ,CAACK,OAAO,CAAC,CAAC;IACvDoB,gBAAgB,EAAErB,QAAQ;IAC1BsB,QAAQ,EAAE;MAAEC,QAAQ,EAAE;IAAK;EAC/B,CAAC;EACLzB,GAAG,CAAC0B,SAAS,EAAE;EACf;EACA;EACAC,KAAK,CAAC,0CAA0C,EAAEtB,cAAc,CAAC,CAChEuB,IAAI,CAACC,QAAQ,IAAIA,QAAQ,CAACC,IAAI,EAAE,CAAC,CACjCF,IAAI,CAACG,MAAM,IAAI;IACdnB,OAAO,CAACC,GAAG,CAACkB,MAAM,CAAC;EACrB,CAAC,CAAC,CACDC,KAAK,CAACC,KAAK,IAAIrB,OAAO,CAACC,GAAG,CAAC,OAAO,EAAEoB,KAAK,CAAC,CAAC;AAC9C;AAEF,eAAeC,YAAY,CAAClC,GAAG,EAAEc,SAAS,EAAE;EAC1C,IAAI;IACA,MAAMqB,aAAa,GAAGC,KAAK,CAACC,OAAO,CAACvB,SAAS,CAAC,GACxCA,SAAS,GACT,CAACA,SAAS,CAAC;IACjBF,OAAO,CAACC,GAAG,CAACsB,aAAa,CAAC;IAC1B,OAAO,MAAMnC,GAAG,CAAC0B,SAAS,CAACS,aAAa,CAAC;EAC7C,CAAC,CAAC,OAAOG,CAAC,EAAE;IACR1B,OAAO,CAACqB,KAAK,CAAC,oBAAoB,EAAEK,CAAC,CAAC;IACtC,MAAMA,CAAC;EACX;AACF"},"metadata":{},"sourceType":"module"}