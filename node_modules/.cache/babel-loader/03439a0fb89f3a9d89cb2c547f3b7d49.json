{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.formatErrorMessage = exports.formatJsonRpcError = exports.formatJsonRpcResult = exports.formatJsonRpcRequest = exports.payloadId = void 0;\nconst error_1 = require(\"./error\");\nconst constants_1 = require(\"./constants\");\nfunction payloadId() {\n  const date = Date.now() * Math.pow(10, 3);\n  const extra = Math.floor(Math.random() * Math.pow(10, 3));\n  return date + extra;\n}\nexports.payloadId = payloadId;\nfunction formatJsonRpcRequest(method, params, id) {\n  return {\n    id: id || payloadId(),\n    jsonrpc: \"2.0\",\n    method,\n    params\n  };\n}\nexports.formatJsonRpcRequest = formatJsonRpcRequest;\nfunction formatJsonRpcResult(id, result) {\n  return {\n    id,\n    jsonrpc: \"2.0\",\n    result\n  };\n}\nexports.formatJsonRpcResult = formatJsonRpcResult;\nfunction formatJsonRpcError(id, error) {\n  return {\n    id,\n    jsonrpc: \"2.0\",\n    error: formatErrorMessage(error)\n  };\n}\nexports.formatJsonRpcError = formatJsonRpcError;\nfunction formatErrorMessage(error) {\n  if (typeof error === \"undefined\") {\n    return error_1.getError(constants_1.INTERNAL_ERROR);\n  }\n  if (typeof error === \"string\") {\n    error = Object.assign(Object.assign({}, error_1.getError(constants_1.SERVER_ERROR)), {\n      message: error\n    });\n  }\n  if (error_1.isReservedErrorCode(error.code)) {\n    error = error_1.getErrorByCode(error.code);\n  }\n  if (!error_1.isServerErrorCode(error.code)) {\n    throw new Error(\"Error code is not in server code range\");\n  }\n  return error;\n}\nexports.formatErrorMessage = formatErrorMessage;","map":{"version":3,"mappings":";;;;;;AAAA;AAMA;AAQA,SAAgBA,SAAS;EACvB,MAAMC,IAAI,GAAGC,IAAI,CAACC,GAAG,EAAE,GAAGC,IAAI,CAACC,GAAG,CAAC,EAAE,EAAE,CAAC,CAAC;EACzC,MAAMC,KAAK,GAAGF,IAAI,CAACG,KAAK,CAACH,IAAI,CAACI,MAAM,EAAE,GAAGJ,IAAI,CAACC,GAAG,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;EACzD,OAAOJ,IAAI,GAAGK,KAAK;AACrB;AAJAG;AAMA,SAAgBC,oBAAoB,CAClCC,MAAc,EACdC,MAAS,EACTC,EAAW;EAEX,OAAO;IACLA,EAAE,EAAEA,EAAE,IAAIb,SAAS,EAAE;IACrBc,OAAO,EAAE,KAAK;IACdH,MAAM;IACNC;GACD;AACH;AAXAH;AAaA,SAAgBM,mBAAmB,CACjCF,EAAU,EACVG,MAAS;EAET,OAAO;IACLH,EAAE;IACFC,OAAO,EAAE,KAAK;IACdE;GACD;AACH;AATAP;AAWA,SAAgBQ,kBAAkB,CAChCJ,EAAU,EACVK,KAA8B;EAE9B,OAAO;IACLL,EAAE;IACFC,OAAO,EAAE,KAAK;IACdI,KAAK,EAAEC,kBAAkB,CAACD,KAAK;GAChC;AACH;AATAT;AAWA,SAAgBU,kBAAkB,CAChCD,KAA8B;EAE9B,IAAI,OAAOA,KAAK,KAAK,WAAW,EAAE;IAChC,OAAOE,gBAAQ,CAACC,0BAAc,CAAC;;EAEjC,IAAI,OAAOH,KAAK,KAAK,QAAQ,EAAE;IAC7BA,KAAK,mCACAE,gBAAQ,CAACC,wBAAY,CAAC;MACzBC,OAAO,EAAEJ;IAAK,EACf;;EAEH,IAAIE,2BAAmB,CAACF,KAAK,CAACK,IAAI,CAAC,EAAE;IACnCL,KAAK,GAAGE,sBAAc,CAACF,KAAK,CAACK,IAAI,CAAC;;EAEpC,IAAI,CAACH,yBAAiB,CAACF,KAAK,CAACK,IAAI,CAAC,EAAE;IAClC,MAAM,IAAIC,KAAK,CAAC,wCAAwC,CAAC;;EAE3D,OAAON,KAAK;AACd;AAnBAT","names":["payloadId","date","Date","now","Math","pow","extra","floor","random","exports","formatJsonRpcRequest","method","params","id","jsonrpc","formatJsonRpcResult","result","formatJsonRpcError","error","formatErrorMessage","error_1","constants_1","message","code","Error"],"sourceRoot":"","sources":["../../src/format.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}