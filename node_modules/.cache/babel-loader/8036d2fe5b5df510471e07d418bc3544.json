{"ast":null,"code":"const Messenger = require(\"@randlabs/communication-bridge\");\nconst WALLET_BRIDGE_CHANNEL_NAME = \"wallet-bridge-communication-channel\";\nclass Messaging {\n  /**\n   * @description Request object\n   * @typedef {Object} Request\n   * @property {string} method Request method\n   * @property {Object} [params] Optionally, request params\n   */\n\n  /**\n   * @description Response object\n   * @typedef {Object} Response\n   * @property {\"error\"|\"success\"} status Response status\n   * @property {string} message Response message\n   * @property {Object} [data] Optionally, is the request was a success and sent data\n   */\n\n  /**\n   * @description Callback function to manage message received from the channel\n      * @callback onMessagingCallback\n      * @param {Request} request Request received from another window\n      * @param {sendResponse} cb Response callback\n   * @returns {void}\n      */\n\n  /**\n      * @constructor Messaging constructor\n      * @param {onMessagingCallback} [listenerCallback]\n      * @description Create an abstraction of Messenger class\n      */\n\n  constructor(listenerCallback) {\n    const that = this;\n\n    /**\n     * @access public\n     * @description Send message options\n     * @type {import(\"bridge-communication\").sendMessageOptions}\n     */\n    this.options = {\n      waitForReply: true,\n      timeout: 250\n    };\n\n    /**\n     * @access private\n     */\n    this.listenerCallback = listenerCallback;\n\n    /**\n     * @access private\n     * @type {Messenger}\n     */\n    this.bridge = new Messenger(WALLET_BRIDGE_CHANNEL_NAME, function (req, source, cb, bridge) {\n      if (that.listenerCallback) that.listenerCallback(req, cb);\n    });\n  }\n\n  /**\n   * @access public\n      * @description Send message to a target window\n      * @param {Window} window Target window\n      * @param {Request} request Request\n      * @param {string} origin Target origin\n   * @param {import(\"bridge-communication\").sendMessageOptions} [options] Override default message options\n   * @returns {Promise<Response>} Response of the target window\n      */\n\n  sendMessage(window, request, origin, options) {\n    return this.bridge.sendMessage(window, request, origin, options ? options : this.options);\n  }\n\n  /**\n   * @access public\n   * @description Set new listener\n   * @param {onMessagingCallback} [listenerCallback] Set a new listener or override actual listener\n   * @returns {void}\n   */\n  setNewListener(listenerCallback) {\n    this.listenerCallback = listenerCallback;\n  }\n\n  /**\n   * @access public\n   * @description Close bridge\n   * @returns {void}\n   */\n  close() {\n    this.bridge.close();\n  }\n}\nmodule.exports = Messaging;","map":{"version":3,"names":["Messenger","require","WALLET_BRIDGE_CHANNEL_NAME","Messaging","constructor","listenerCallback","that","options","waitForReply","timeout","bridge","req","source","cb","sendMessage","window","request","origin","setNewListener","close","module","exports"],"sources":["C:/Users/user/Desktop/Optimum-Staking-main/node_modules/@randlabs/myalgo-connect/lib/messaging/Messaging.js"],"sourcesContent":["const Messenger = require(\"@randlabs/communication-bridge\");\n\nconst WALLET_BRIDGE_CHANNEL_NAME = \"wallet-bridge-communication-channel\";\n\nclass Messaging {\n\n\t/**\n\t * @description Request object\n\t * @typedef {Object} Request\n\t * @property {string} method Request method\n\t * @property {Object} [params] Optionally, request params\n\t */\n\n\t/**\n\t * @description Response object\n\t * @typedef {Object} Response\n\t * @property {\"error\"|\"success\"} status Response status\n\t * @property {string} message Response message\n\t * @property {Object} [data] Optionally, is the request was a success and sent data\n\t */\n\n\n\t/**\n\t * @description Callback function to manage message received from the channel\n     * @callback onMessagingCallback\n     * @param {Request} request Request received from another window\n     * @param {sendResponse} cb Response callback\n\t * @returns {void}\n     */\n\n\t/**\n     * @constructor Messaging constructor\n     * @param {onMessagingCallback} [listenerCallback]\n     * @description Create an abstraction of Messenger class\n     */\n\n\tconstructor(listenerCallback) {\n\t\tconst that = this;\n\n\t\t/**\n\t\t * @access public\n\t\t * @description Send message options\n\t\t * @type {import(\"bridge-communication\").sendMessageOptions}\n\t\t */\n\t\tthis.options = { waitForReply: true, timeout: 250 };\n\n\t\t/**\n\t\t * @access private\n\t\t */\n\t\tthis.listenerCallback = listenerCallback;\n\n\t\t/**\n\t\t * @access private\n\t\t * @type {Messenger}\n\t\t */\n\t\tthis.bridge = new Messenger(WALLET_BRIDGE_CHANNEL_NAME, function(req, source, cb, bridge) {\n\t\t\tif (that.listenerCallback)\n\t\t\t\tthat.listenerCallback(req, cb);\n\t\t});\n\t}\n\n\t/**\n\t * @access public\n     * @description Send message to a target window\n     * @param {Window} window Target window\n     * @param {Request} request Request\n     * @param {string} origin Target origin\n\t * @param {import(\"bridge-communication\").sendMessageOptions} [options] Override default message options\n\t * @returns {Promise<Response>} Response of the target window\n     */\n\n\tsendMessage(window, request, origin, options) {\n\t\treturn this.bridge.sendMessage(window, request, origin, options ? options : this.options);\n\t}\n\n\t/**\n\t * @access public\n\t * @description Set new listener\n\t * @param {onMessagingCallback} [listenerCallback] Set a new listener or override actual listener\n\t * @returns {void}\n\t */\n\tsetNewListener(listenerCallback) {\n\t\tthis.listenerCallback = listenerCallback;\n\t}\n\n\t/**\n\t * @access public\n\t * @description Close bridge\n\t * @returns {void}\n\t */\n\tclose() {\n\t\tthis.bridge.close();\n\t}\n}\n\nmodule.exports = Messaging;\n"],"mappings":"AAAA,MAAMA,SAAS,GAAGC,OAAO,CAAC,gCAAgC,CAAC;AAE3D,MAAMC,0BAA0B,GAAG,qCAAqC;AAExE,MAAMC,SAAS,CAAC;EAEf;AACD;AACA;AACA;AACA;AACA;;EAEC;AACD;AACA;AACA;AACA;AACA;AACA;;EAGC;AACD;AACA;AACA;AACA;AACA;AACA;;EAEC;AACD;AACA;AACA;AACA;;EAECC,WAAW,CAACC,gBAAgB,EAAE;IAC7B,MAAMC,IAAI,GAAG,IAAI;;IAEjB;AACF;AACA;AACA;AACA;IACE,IAAI,CAACC,OAAO,GAAG;MAAEC,YAAY,EAAE,IAAI;MAAEC,OAAO,EAAE;IAAI,CAAC;;IAEnD;AACF;AACA;IACE,IAAI,CAACJ,gBAAgB,GAAGA,gBAAgB;;IAExC;AACF;AACA;AACA;IACE,IAAI,CAACK,MAAM,GAAG,IAAIV,SAAS,CAACE,0BAA0B,EAAE,UAASS,GAAG,EAAEC,MAAM,EAAEC,EAAE,EAAEH,MAAM,EAAE;MACzF,IAAIJ,IAAI,CAACD,gBAAgB,EACxBC,IAAI,CAACD,gBAAgB,CAACM,GAAG,EAAEE,EAAE,CAAC;IAChC,CAAC,CAAC;EACH;;EAEA;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;EAECC,WAAW,CAACC,MAAM,EAAEC,OAAO,EAAEC,MAAM,EAAEV,OAAO,EAAE;IAC7C,OAAO,IAAI,CAACG,MAAM,CAACI,WAAW,CAACC,MAAM,EAAEC,OAAO,EAAEC,MAAM,EAAEV,OAAO,GAAGA,OAAO,GAAG,IAAI,CAACA,OAAO,CAAC;EAC1F;;EAEA;AACD;AACA;AACA;AACA;AACA;EACCW,cAAc,CAACb,gBAAgB,EAAE;IAChC,IAAI,CAACA,gBAAgB,GAAGA,gBAAgB;EACzC;;EAEA;AACD;AACA;AACA;AACA;EACCc,KAAK,GAAG;IACP,IAAI,CAACT,MAAM,CAACS,KAAK,EAAE;EACpB;AACD;AAEAC,MAAM,CAACC,OAAO,GAAGlB,SAAS"},"metadata":{},"sourceType":"script"}